(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/logo.26904bd1.png"},42:function(e,t,a){e.exports=a(77)},50:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"signUp",function(){return T}),a.d(r,"signIn",function(){return I}),a.d(r,"signOut",function(){return k});var n={};a.r(n),a.d(n,"addToCart",function(){return Ne}),a.d(n,"increaseToCart",function(){return we}),a.d(n,"deleteFromCart",function(){return Se}),a.d(n,"decreaseFromCart",function(){return Ce}),a.d(n,"placeOrder",function(){return _e});var o=a(0),c=a.n(o),s=a(18),i=a.n(s),l=a(4),u=a(80),d=a(81),p=a(83),m=a(26),h=a.n(m),f=(a(50),a(5)),g=a(9),E=a(7),v=a(6),y=a(8),b=a(79),O=a(1),N=a.n(O),w=a(3),S="CLEAR_FORM",C=a(11),_=a.n(C),T=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,_.a.post("http://localhost:5000/signup",e);case 4:return r=t.sent,t.next=7,a({type:"AUTH_SIGN_UP",payload:r.data.token});case 7:localStorage.setItem("JWT_TOKEN",JSON.stringify(r.data.token)),a({type:"CLEAR_ERROR",payload:""}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:"WRITE_ERROR",payload:t.t0.response.data.error});case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,_.a.post("http://localhost:5000/signin",e);case 4:return r=t.sent,t.next=7,a({type:"AUTH_SIGN_IN",payload:r.data.token});case 7:localStorage.setItem("JWT_TOKEN",JSON.stringify(r.data.token)),a({type:"CLEAR_ERROR",payload:""}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:"WRITE_ERROR",payload:"Email or Password are not correct , Please try again"});case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(e){localStorage.removeItem("JWT_TOKEN"),localStorage.removeItem("PRODUCTS"),localStorage.removeItem("ACTIVE_USER"),localStorage.removeItem("CATEGORIES"),localStorage.removeItem("ORDERS"),localStorage.removeItem("CART"),localStorage.removeItem("RECIEPT"),localStorage.removeItem("SELECTED_PRODUCT"),localStorage.removeItem("ADDED_RECENTLY"),localStorage.removeItem("EDITED_RECENTLY"),localStorage.removeItem("ADDED_TO_CART_RECENTLY"),localStorage.removeItem("REMOVED_FROM_CART_RECENTLY"),e({type:"AUTH_SIGN_OUT",payload:""})}},x=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).signOut=function(){a.props.signOut()},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.logedinUser&&this.props.logedinUser.role;return c.a.createElement("header",null,c.a.createElement("div",{className:"navbar-fixed"},c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement("ul",{className:"left"},c.a.createElement("li",null,c.a.createElement(b.a,{to:"/"},"Logo")),this.props.isAuthenticated&&c.a.createElement("li",null,c.a.createElement(b.a,{to:"client"===e?"/dashboard":"/manage"},"client"===e?"Dashboard":"Manage"))),c.a.createElement("ul",{id:"nav-mobile",className:"right"},!this.props.isAuthenticated&&[c.a.createElement("li",{key:"signin"},c.a.createElement(b.a,{to:"/signin"},"Sign-In")),c.a.createElement("li",{key:"signup"},c.a.createElement(b.a,{to:"/signup"},"Sign-Up"))],this.props.isAuthenticated&&c.a.createElement("li",null,c.a.createElement(b.a,{to:"/signin",onClick:this.signOut},"Sign-Out")))))))}}]),t}(o.Component);var R=Object(l.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,token:e.auth.token,logedinUser:e.data.logedinUser}},r)(x),j=function(e){return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{id:"footerBtn"}),c.a.createElement("div",{id:"footerContainer"},c.a.createElement("div",{id:"cont"},c.a.createElement("div",{className:"footer_center"},c.a.createElement("h3",null,"Classy footer text")))))},D=a(82),A=Object(D.a)(Object(l.b)(function(e){return{ariaHide:e.dialog.ariaHide}},null)(function(e){return c.a.createElement("div",{className:"App Site","aria-hidden":e.ariaHide},c.a.createElement("div",{className:"Site-content"},c.a.createElement("div",{className:"App-header"},c.a.createElement(R,e)),c.a.createElement("div",{className:"main"},e.children)),c.a.createElement(j,null))})),P=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://localhost:5000/data/user/",{headers:{Authorization:e}});case 3:r=t.sent,localStorage.setItem("ACTIVE_USER",JSON.stringify(r.data.user)),a({type:"INIT_DATA_USER",payload:r.data.user}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://localhost:5000/data/cart/",{headers:{Authorization:e}});case 3:r=t.sent,console.log(r.data),localStorage.setItem("CART",JSON.stringify(r.data.cart)),a({type:"INIT_DATA_CART_USER",payload:r.data.cart}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://localhost:5000/data/products/",{headers:{Authorization:e}});case 3:r=t.sent,localStorage.setItem("PRODUCTS",JSON.stringify(r.data.products)),a({type:"INIT_PRODUCTS",payload:r.data.products}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://localhost:5000/data/orders",{headers:{Authorization:e}});case 3:r=t.sent,localStorage.setItem("ORDERS",JSON.stringify(r.data.orders)),a({type:"INIT_ORDERS",payload:r.data.orders}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(w.a)(N.a.mark(function t(a){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://localhost:5000/data/categories/",{headers:{Authorization:e}});case 3:r=t.sent,localStorage.setItem("CATEGORIES",JSON.stringify(r.data.categories)),a({type:"INIT_CATEGORIES",payload:r.data.categories}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()};var q=Object(l.b)(function(e){return{cart:e.data.cart,logedinUser:e.data.logedinUser}},null)(function(e){var t=e.cart&&e.logedinUser&&c.a.createElement("div",{className:"col s12 m6"},c.a.createElement("h5",{className:"header"},"Hi ",e.logedinUser.firstName,", welcome ",0!==e.cart.products.length&&"back"," to your shopping area"),c.a.createElement("div",{className:"card horizontal"},c.a.createElement("div",{className:"card-stacked"},c.a.createElement("div",{className:"card-content"},0!==e.cart.products.length?c.a.createElement("p",null,"We've detected that you have an active cart"):c.a.createElement("p",null,"We have detected that you have not yet made purchases on our site. You are welcome to check out our products")),c.a.createElement("div",{className:"card-action"},c.a.createElement(b.a,{to:"/dashboard"},"Continue shopping")))));return c.a.createElement("div",null,t)});var V=Object(l.b)(function(e){return{products:e.data.products,orders:e.data.orders}},null)(function(e){var t=e.products&&e.orders?c.a.createElement("div",{className:"col s12 m6 card-panel"},c.a.createElement("p",null,"The amount of orders made on the site: ",e.orders.length),c.a.createElement("p",null,"The quantity of products available on the site: ",e.products.length)):null;return c.a.createElement("div",null,c.a.createElement("h4",null,"about our store"),t)}),J=function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{className:"App-logo",style:{width:"10rem"},src:h.a}),c.a.createElement("div",{className:"share-btns"},c.a.createElement("a",{href:"#"},c.a.createElement("img",{src:"https://simplesharebuttons.com/images/somacro/email.png",alt:"Email"})),c.a.createElement("a",{href:"#"},c.a.createElement("img",{src:"https://simplesharebuttons.com/images/somacro/facebook.png",alt:"Facebook"})),c.a.createElement("a",{href:"#"},c.a.createElement("img",{src:"https://simplesharebuttons.com/images/somacro/google.png",alt:"Google"})),c.a.createElement("a",{href:"#"},c.a.createElement("img",{src:"https://simplesharebuttons.com/images/somacro/linkedin.png",alt:"LinkedIn"})))),c.a.createElement("div",{className:"card-content"},c.a.createElement("p",null,"I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively."))))},H=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=Object(w.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.isAuthenticated){e.next=7;break}return e.next=3,a.props.InitDataUser(a.props.token);case 3:return e.next=5,a.props.InitDataStore(a.props.token);case 5:e.next=8;break;case 7:a.props.history.push("/signin");case 8:a.props.logedinUser&&"manager"===a.props.logedinUser.role&&a.props.history.push("/manage");case 9:case"end":return e.stop()}},e,this)})),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement(q,null),c.a.createElement(V,null)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"row"},c.a.createElement(J,null))))}}]),t}(o.Component),W=Object(l.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,token:e.auth.token,logedinUser:e.data.logedinUser,products:e.data.products,orders:e.data.orders,cart:e.data.cart}},function(e){return{InitDataStore:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(L(a));case 2:return t.next=4,e(M(a));case 4:return t.next=6,e(F(a));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),InitDataUser:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(P(a));case 2:return t.next=4,e(U(a));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(H),Y=new RegExp(/^([a-z0-9_.-]+)@([a-z0-9.-]+)\.([a-z.]{2,5})$/),G=new RegExp(/^\d{3}$/),z=new RegExp(/^[0-9]{4}[0-9]{4}[0-9]{4}[0-9]{4}$/),B=[{required:!0,type:"text",name:"name",label:"Name",isValid:function(e){return e&&e.length>=2},errMsg:"name have to be 2 chracters minimum"},{required:!0,type:"text",isValid:function(e){return e&&!isNaN(e)},errMsg:"price have to be a number",name:"price",label:"Price"},{required:!0,type:"file",name:"image",label:"Image"}],X=[{required:!0,type:"text",name:"name",label:"Name",isValid:function(e){return e&&e.length>=2},errMsg:"name have to be 2 chracters minimum"},{required:!0,type:"text",isValid:function(e){return e&&!isNaN(e)},errMsg:"price have to be a number",name:"price",label:"Price"},{required:!1,type:"file",name:"image",label:"Image"}],K=[{required:!0,type:"text",name:"productsSearch",label:"type search value...",icon:"search"}],$=[{required:!1,type:"text",name:"cartSearch",label:"type search value...",icon:"search"}],Q=[{required:!0,type:"number",name:"quantity",isValid:function(e){return e&&e>0},errMsg:"Quantity have to be 1 minimum",label:"Quantity"}],Z=[{required:!0,type:"text",name:"city",isValid:function(e){return e&&e.length>=2},errMsg:"City is not valid",label:"City"},{required:!0,type:"text",name:"street",isValid:function(e){return e&&e.length>=4},errMsg:"Street is not valid",label:"Street"},{required:!0,type:"date-time",name:"shippingDate",isValid:function(e){return e&&new Date(e).getTime()>(new Date).getTime()+2592e5},errMsg:"Minimum delivery date is 3 days",label:"Shipping Date"},{required:!0,type:"tel",name:"cardNumber",isValid:function(e){return e&&z.exec(e)},errMsg:"card Number have to be valid",label:"card number"},{required:!0,type:"month",name:"cardExpiry",isValid:function(e){return e&&new Date(e)>new Date(Date.now())},errMsg:"this date is expired",label:"card expiry"},{required:!0,type:"tel",name:"cardCVC",isValid:function(e){return e&&G.exec(e)},errMsg:"card CVC have to be valid",label:"CVC code"}],ee=[{required:!0,type:"email",name:"email",isValid:function(e){return e&&Y.exec(e)},errMsg:"Email is not valid",label:"email"},{required:!0,type:"password",name:"password",isValid:function(e){return e&&e.length>=4},errMsg:"password min 4 digits",label:"password"}],te=[{required:!0,type:"text",name:"firstName",isValid:function(e){return e&&e.length>=2},errMsg:"first name min 2 digits",label:"first name"},{required:!0,type:"text",name:"lastName",isValid:function(e){return e&&e.length>=2},errMsg:"last name min 2 digits",label:"last name"},{required:!0,type:"password",name:"password",isValid:function(e){return e&&e.length>=4},errMsg:"password min 4 digits",label:"password"},{required:!0,type:"password",name:"confirmPassword",isValid:function(e){return e&&e.length>=4},errMsg:"password min 4 digits",label:"confirm password"},{required:!0,type:"email",name:"email",isValid:function(e){return e&&Y.exec(e)},errMsg:"Email is not valid",label:"email"},{required:!0,type:"text",name:"id",isValid:function(e){return e&&e.length>=9},errMsg:"id min 9 digits",label:"id"},{required:!0,type:"text",name:"city",isValid:function(e){return e&&e.length>=2},errMsg:"city min 2 digits",label:"city"},{required:!0,type:"text",name:"street",isValid:function(e){return e&&e.length>=2},errMsg:"street min 2 digits",label:"street"}],ae=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"".concat(this.props.classcss)},c.a.createElement("h4",null,this.props.title),c.a.createElement("form",{encType:this.props.enctype&&this.props.enctype,onSubmit:function(t){return e.props.onsubmit(t)}},this.props.model.map(function(t,a){return c.a.createElement("div",{className:"input",key:a},c.a.createElement(ne,{required:t.required,id:t.name,type:t.type,name:t.name,label:t.label,icon:t.icon&&t.icon,ondoubleclick:e.props.ondoubleclick,currentValue:e.props.form[t.name]&&e.props.form[t.name],onchange:e.props.handleFile,oninput:e.props.onInput}),t.isValid&&t.isValid(e.props.form[t.name])||!e.props.form[t.name]?void 0:c.a.createElement("p",{className:"error red-text"},t.errMsg))}),c.a.createElement("div",null,this.props.children),this.props.btnSubmit&&c.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Submit",c.a.createElement("i",{className:"material-icons right"},"send"))))}}]),t}(o.Component),re=Object(l.b)(function(e){return{form:e.form}},function(e){return{onInput:function(t){e({type:"ON_INPUT",payload:t.target})}}})(ae),ne=function(e){var t=e.name,a=e.id,r=e.type,n=e.oninput,o=e.icon,s=e.label,i=e.required,l=e.currentValue,u=e.ondoubleclick,d=e.onchange;return c.a.createElement("div",{className:"input-field col s12"},c.a.createElement("input",{onInput:function(e){return"file"!==r&&n(e)},required:i,defaultValue:l&&l,name:t,id:a,type:r,onDoubleClick:function(e){return u&&u(e)},onChange:function(e){return d&&"file"===r&&d(e)}}),o?c.a.createElement("i",{className:"small material-icons"},o):null,c.a.createElement("label",{className:"active",htmlFor:a},s))},oe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=function(){a.props.errorMessage||a.props.clearForm(),a.props.isAuthenticated&&a.props.history.push("/")},a.onSubmit=function(){var e=Object(w.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.props.signUp(a.props.form);case 3:a.props.errorMessage?a.props.history.push({pathname:"/dialog/error",state:{dialogisOpen:!0},params:a.props.errorMessage}):(a.props.clearForm(),a.props.history.push("/"));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"sign_up",className:"row center"},c.a.createElement("h4",{className:"col s12 "},"Hi, Welcom to WebStore! please Sign-up "),c.a.createElement(re,Object.assign({},this.props,{btnSubmit:!0,title:"Sign Up",onsubmit:this.onSubmit,classcss:"col s7 ",model:te})),c.a.createElement("div",{className:"col s4 "},c.a.createElement(J,null)))}}]),t}(o.Component),ce=Object(l.b)(function(e){return{form:e.form,isAuthenticated:e.auth.isAuthenticated,errorMessage:e.message.errorMessage}},function(e){return{signUp:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(T(a));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),clearForm:function(){e({type:S})}}})(oe),se=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=function(){a.props.errorMessage||a.props.clearForm(),a.props.isAuthenticated&&a.props.history.push("/")},a.onSubmit=function(){var e=Object(w.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.props.signIn(a.props.form);case 3:a.props.errorMessage?a.props.history.push({pathname:"/dialog/error",state:{dialogisOpen:!0},params:a.props.errorMessage}):(a.props.clearForm(),a.props.history.push("/"));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"sign_in",className:"row center"},c.a.createElement("h4",{className:"col s12"},"Hi, Welcome to WebStore! please Sign-In "),c.a.createElement(re,{btnSubmit:!0,title:"Sign In",onsubmit:this.onSubmit,classcss:" card-panel",model:ee}))}}]),t}(o.Component);var ie=Object(l.b)(function(e){return{form:e.form,isAuthenticated:e.auth.isAuthenticated,errorMessage:e.message.errorMessage}},function(e){return{signIn:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(I(a));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),clearForm:function(){e({type:S})}}})(se),le=Object(l.b)(function(e){return{categories:e.data.categories,products:e.data.products}},null)(function(e){var t=e.categories.map(function(t){var a=t.name,r=t._id;return t.pathName,c.a.createElement("li",{key:r,className:"tab"},c.a.createElement(b.a,{to:"/".concat(e.route,"/details/?").concat(r)},a))});return c.a.createElement("div",{className:"row",id:"category_nav"},c.a.createElement("nav",{className:"nav-extended"},c.a.createElement("div",{className:"nav-content"},c.a.createElement("ul",{className:"tabs tabs-transparent"},t,c.a.createElement("li",{className:"tab col",key:"All"},c.a.createElement(b.a,{to:"/".concat(e.route,"/details/")},"All"))))))}),ue=function(e){return function(t){console.log(e),localStorage.setItem("SELECTED_PRODUCT",JSON.stringify(e)),t({type:"INIT_SELECED_PRODUCT",payload:e})}},de=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.post("http://localhost:5000".concat(e),t);case 2:n=a.sent,console.log(n),localStorage.setItem("ADDED_RECENTLY",JSON.stringify(n.data.newProd)),r({type:"ADD_PRODUCT",payload:n.data.newProd}),r({type:"WRITE_NOTIFY",payload:"your product has been added successfully"}),localStorage.setItem("SELECTED_PRODUCT",JSON.stringify(n.data.newProd)),r({type:"INIT_SELECED_PRODUCT",payload:n.data.newProd});case 9:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},pe=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t),a.next=3,_.a.post("http://localhost:5000".concat(e),t);case 3:n=a.sent,console.log(n.data.updatedProd),localStorage.setItem("EDITED_RECENTLY",JSON.stringify(n.data.updatedProd)),r({type:"EDIT_PRODUCT",payload:n.data.updatedProd}),r({type:"WRITE_NOTIFY",payload:"your product has been editted successfully"});case 8:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},me=Object(l.b)(function(e){return{products:e.data.products,form:e.form.productsSearch}},function(e){return{initSelectedProduct:function(t,a){a.history.push("/manage/details/?".concat(t.category_id)),e(ue(t))}}})(function(e){var t=e.location.search.split("?")[1],a=e.location.pathname.split("/")[1],r=void 0===t?e.products:e.products.filter(function(e){return e.category_id===t}),n=(e.form?r.filter(function(t){return t.name.includes(e.form)&&t}):r).map(function(t){return c.a.createElement("div",{key:t._id,className:"col s12 m6 l4"},c.a.createElement("div",{onClick:function(){return"dashboard"!==a&&e.initSelectedProduct(t,e)},className:"dashboard"!==a?"card productToSelect":"card"},c.a.createElement("span",{className:"card-title"},t.name),c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{src:"http://localhost:5000/".concat(t.image),alt:t.name}),"dashboard"===a&&c.a.createElement(b.a,{to:{pathname:"/dialog/quantity",state:{dialogisOpen:!0},params:t},className:"btn-floating halfway-fab waves-effect waves-light red",onClick:function(){return e.handleClick()},type:"button"}," ",c.a.createElement("i",{className:"material-icons"},"add"))),c.a.createElement("div",{className:"card-content"},c.a.createElement("h4",null,t.price),c.a.createElement("p",null,"I am a very simple card."))))});return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"cards"},n))}),he=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=function(){a.props.clearForm()},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"row"},c.a.createElement(re,{onsubmit:function(e){e.preventDefault()},classcss:"input-field col s6",model:K,btnSubmit:!1}))}}]),t}(o.Component),fe=Object(l.b)(function(e){return{products:e.data.products}},function(e){return{clearForm:function(){e({type:S})}}})(he),ge=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).startDrag=function(e){document.addEventListener("mousemove",a.drag),document.addEventListener("mouseup",a.endDrag),console.log(e.clientX),a.setState({isResizing:!0,lastDownX:e.clientX})},a.drag=function(e){if(a.state.isResizing){var t=a.view.clientWidth-(e.clientX-a.view.offsetLeft);a.leftPanel.style.right=" ".concat(t,"px"),a.rightPanel.style.width="".concat(t,"px")}},a.endDrag=function(e){a.setState({isResizing:!1}),document.removeEventListener("mousemove",a.drag),document.removeEventListener("mouseup",a.endDrag)},a.componentDidMount=function(){a.view=document.querySelector("#split_view"),a.leftPanel=document.querySelector("#left_panel"),a.rightPanel=document.querySelector("#right_panel"),a.dragLine=document.querySelector("#drag"),a.dragLine.addEventListener("mousedown",a.startDrag)},a.state={isResizing:!1,lastDownX:0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"drag"})}}]),t}(o.Component),Ee=function(e){return c.a.createElement("div",null,c.a.createElement(ge,{id:"drag"}),c.a.createElement("div",{className:"row"},c.a.createElement(fe,null)),c.a.createElement("div",{className:"row"},e.children))},ve=a(24),ye=a.n(ve);var be=Object(l.b)(function(e){return{cart:e.data.cart,form:e.form.cartSearch}},function(e){return{clearForm:function(){e({type:S})}}})(function(e){var t=e.location.pathname,a=e.cart.products.reduce(function(e,t){return e+Number(t.price*t.quantity)},0),r=e.cart.products.reduce(function(e,t){return Number(e)+Number(t.quantity)},0),n=void 0!==e.form?e.form.split(" ").map(function(e){return e}):[""],o=e.cart.products.map(function(a){return c.a.createElement("li",{key:a.added_id,className:"collection-item avatar"},c.a.createElement("img",{src:a.image,alt:a.name,className:"circle"}),c.a.createElement("span",{className:"search title"},"Name:",c.a.createElement(ye.a,{highlightClassName:"yellow",searchWords:n,textToHighlight:a.name})),c.a.createElement("span",{className:"search quantity"}," Quantity:",c.a.createElement(ye.a,{highlightClassName:"yellow",searchWords:n,textToHighlight:a.quantity.toString()})),c.a.createElement("span",{className:"search price"},"Price:",c.a.createElement(ye.a,{highlightClassName:"yellow",searchWords:n,textToHighlight:(a.price*a.quantity).toFixed(2).toString()})),"/dashboard/order"!==t&&c.a.createElement("button",{onClick:function(){return e.handleClick(a.added_id)},className:"btn-floating waves-effect waves-light red"},c.a.createElement("i",{className:"material-icons"},"clear")))});return c.a.createElement("div",null,c.a.createElement("div",{className:"center-align"},c.a.createElement("h4",null,"/dashboard/order"===t?"Bill Order":"Shopping Cart"," ",c.a.createElement("span",null,"(","".concat(r," Products"),")"))),c.a.createElement("div",{className:"row"},c.a.createElement(re,{onsubmit:function(e){e.preventDefault()},classcss:"input-field col s6",model:$,btnSubmit:!1})),c.a.createElement("div",{className:"col s12 "},o),c.a.createElement("footer",null,"/dashboard/order"===t?c.a.createElement(b.a,{to:"/dashboard"},"Back To Shop"):c.a.createElement(b.a,{to:"/dashboard/order"},"To Order"),c.a.createElement("h5",null,"Total-Price: ".concat(a.toFixed(2),"$"))))}),Oe=a(41),Ne=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n,o,c,s,i;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e,t),a.next=3,_.a.post("http://localhost:5000/cart/add/".concat(t),e);case 3:return n=a.sent,o=Object(Oe.a)(n.data.updatedCart.products),c=o.slice(0),s=c.length-1,i=c[s],localStorage.setItem("ADDED_TO_CART_RECENTLY",JSON.stringify(i)),a.next=10,r({type:"ADD_TO_CART",payload:i});case 10:return localStorage.setItem("CART",JSON.stringify(n.data.updatedCart)),a.next=13,r({type:"INIT_DATA_CART_USER",payload:n.data.updatedCart});case 13:r({type:"CLOSE_DIALOG",payload:{ariaHide:!1}});case 14:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},we=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e,t),a.next=3,_.a.post("http://localhost:5000/cart/".concat(t,"/increase/"),e);case 3:return n=a.sent,localStorage.setItem("ADDED_TO_CART_RECENTLY",JSON.stringify(n.data.updatedProduct)),a.next=7,r({type:"ADD_TO_CART",payload:n.data.updatedProduct});case 7:return localStorage.setItem("CART",JSON.stringify(n.data.updatedCart)),a.next=10,r({type:"INIT_DATA_CART_USER",payload:n.data.updatedCart});case 10:return a.next=12,r({type:"CLOSE_DIALOG",payload:{ariaHide:!1}});case 12:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},Se=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.delete("http://localhost:5000/cart/delete/".concat(t),{data:{prodId:e}});case 2:return n=a.sent,console.log(n.data.updatedProduct),localStorage.setItem("REMOVED_FROM_CART_RECENTLY",JSON.stringify(n.data.updatedProduct)),a.next=7,r({type:"DELETE_FROM_CART",payload:n.data.updatedProduct});case 7:return localStorage.setItem("CART",JSON.stringify(n.data.updatedCart)),a.next=10,r({type:"INIT_DATA_CART_USER",payload:n.data.updatedCart});case 10:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},Ce=function(e,t){return function(){var a=Object(w.a)(N.a.mark(function a(r){var n;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.delete("http://localhost:5000/cart/decrease/".concat(t),{data:{prodId:e}});case 2:return n=a.sent,console.log(n.data.updatedProduct),localStorage.setItem("REMOVED_FROM_CART_RECENTLY",JSON.stringify(n.data.updatedProduct)),a.next=7,r({type:"DELETE_FROM_CART",payload:n.data.updatedProduct});case 7:return localStorage.setItem("CART",JSON.stringify(n.data.updatedCart)),a.next=10,r({type:"INIT_DATA_CART_USER",payload:n.data.updatedCart});case 10:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},_e=function(e){var t=e.data,a=e.userId,r=e.cartId;return function(){var e=Object(w.a)(N.a.mark(function e(n){var o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("http://localhost:5000/cart/".concat(r,"/order/").concat(a),t);case 3:o=e.sent,localStorage.setItem("CART",JSON.stringify(o.data.newCart)),n({type:"BILL_ACCEPTED",payload:o.data.orderId}),n({type:"WRITE_NOTIFY",payload:"Your order has been received in the system and will be processed."}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:"WRITE_ERROR",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()};var Te=Object(l.b)(function(e){return{logedinUser:e.data.logedinUser}},n)(function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"center-align"},c.a.createElement("h4",null,"Your Shopping Cart")),c.a.createElement("div",{className:"col s12 "},c.a.createElement("h5",{className:"header center-align"},"Hi ",e.logedinUser.firstName,", This is the area where the products you add to your shopping cart will be added"),c.a.createElement("div",{className:"card horizontal"},c.a.createElement("div",{className:"card-stacked"},c.a.createElement("div",{className:"card-content"},c.a.createElement("p",null,"Start your shopping by navigating through categories and adding the product you want to your shopping cart"))))),c.a.createElement("footer",null,"footer"))}),Ie=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"collection"},0!==this.props.cart.products.length?c.a.createElement(be,this.props):c.a.createElement(Te,null),this.props.addedToCartRecently&&0!==this.props.cart.products.length&&c.a.createElement("p",null,"added recently: ".concat(this.props.addedToCartRecently.name,"\n                        quantity: ").concat(this.props.addedToCartRecently.quantity,"\n                        price: ").concat(this.props.addedToCartRecently.price," / 1 unit\n                        ")),this.props.removedFromCartRecently&&0!==this.props.cart.products.length&&c.a.createElement("p",null,"removed recently: ".concat(this.props.removedFromCartRecently.name,"\n                        price: ").concat(this.props.removedFromCartRecently.price," / 1 unit\n                        "))))}}]),t}(o.Component);var ke=Object(l.b)(function(e){return{addedToCartRecently:e.users.addedToCartRecently,removedFromCartRecently:e.users.removedFromCartRecently,cart:e.data.cart}},null)(Ie),xe=a(38),Re=a.n(xe),je=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=function(){a.props.errorMessage||a.props.clearForm()},a.componentDidMount=Object(w.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("http://localhost:5000/data/takenDates/dates");case 2:t=e.sent,Re()("#shippingDate",{onSelect:function(e,t){var r={name:"shippingDate",value:t.toLocaleDateString()};a.props.onInput(r)},formatter:function(e,t,a){console.log(a);var r=t.toLocaleDateString();e.value=r},disabledDates:t.data.takenDatesArr.map(function(e){return new Date(e)})});case 4:case"end":return e.stop()}},e,this)})),a.onSubmit=function(){var e=Object(w.a)(N.a.mark(function e(t){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={data:a.props.form,userId:a.props.logedinUser._id,cartId:a.props.cart._id},e.next=4,a.props.placeOrder(r);case 4:if(a.props.errorMessage){e.next=11;break}return a.props.clearForm(),e.next=8,a.props.history.push("/dashboard");case 8:a.props.history.push({pathname:"/dialog/notify",state:{dialogisOpen:!0},params:c.a.createElement("div",null,c.a.createElement("p",null,"Thank you very much for your purchase!"),c.a.createElement("p",null,"the invoice has been forwarded to your email ",c.a.createElement("address",null,a.props.logedinUser.email)),c.a.createElement("p",null,c.a.createElement("b",null,a.props.notifyMessage)),c.a.createElement("p",null,"An invoice for display is attached ",c.a.createElement("a",{href:"http://localhost:5000/data/".concat(a.props.orderId,"/bill"),download:"bill"},"here")))}),e.next=12;break;case 11:a.props.history.push({pathname:"/dialog/error",state:{dialogisOpen:!0},params:a.props.errorMessage});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onDoubleClick=function(e){if("city"===e.target.name||"street"===e.target.name){console.log(e.target);var t={name:e.target.name,value:a.props.logedinUser[e.target.name]};console.log(t),a.props.onInput(t)}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"confirm_order",className:"row"},c.a.createElement("h5",{className:"col s12"},"Hi, We appreciate your choice to buy with Us, Please Fill-in your Payment Details to complete the order process "),c.a.createElement(re,{name:"form",onsubmit:this.onSubmit,ondoubleclick:this.onDoubleClick,classcss:"col s12 card-panel",model:Z,currentValue:this.state,btnSubmit:!0}))}}]),t}(o.Component),De=Object(l.b)(function(e){return{orderId:e.users.orderId,form:e.form,errorMessage:e.message.errorMessage,notifyMessage:e.message.notifyMessage,logedinUser:e.data.logedinUser,cart:e.data.cart}},function(e){return{placeOrder:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(_e(a));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),clearForm:function(){e({type:S})},onInput:function(t){e({type:"ON_INPUT",payload:t})}}})(je),Ae=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).handleDeleteClick=function(){var e=Object(w.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=a.props.cart.products.find(function(e){return e.added_id===t}).quantity){e.next=12;break}return e.prev=2,e.next=5,a.props.deleteFromCart(t,a.props.logedinUser._id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,a.props.decreaseFromCart(t,a.props.logedinUser._id);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}},e,this,[[2,7],[12,17]])}));return function(t){return e.apply(this,arguments)}}(),a.handleAddClick=Object(w.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.openDialog();case 1:case"end":return e.stop()}},e,this)})),a.componentWillMount=function(){a.props.isAuthenticated||a.props.history.push("/signin")},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{id:"split_view",className:"row "},c.a.createElement("div",{id:"left_panel",className:"col s12 m6"},c.a.createElement(ke,Object.assign({},this.props,{handleClick:this.handleDeleteClick}))),"/dashboard/order"===this.props.location.pathname?c.a.createElement("div",{id:"right_panel",className:"col s12 m6"},c.a.createElement(De,this.props)):c.a.createElement("div",{id:"right_panel",className:"col s12 m6"},c.a.createElement(le,{route:"dashboard"}),c.a.createElement(ge,null),c.a.createElement(Ee,null,c.a.createElement(p.a,null,c.a.createElement(u.a,{key:"All",path:"/dashboard/",render:function(t){return c.a.createElement(me,Object.assign({handleClick:e.handleAddClick},t))}}),this.props.categories.map(function(t){var a=t._id;return c.a.createElement(u.a,{key:a,path:"/dashboard/:category/?id",render:function(t){return c.a.createElement(me,Object.assign({handleClick:e.handleAddClick},t))}})})))))}}]),t}(o.Component),Pe=Object(l.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,token:e.auth.token,logedinUser:e.data.logedinUser,products:e.data.products,categories:e.data.categories,cart:e.data.cart}},function(e){return{addToCart:function(t,a){e(Ne(t,a))},deleteFromCart:function(t,a){e(Se(t,a))},decreaseFromCart:function(t,a){e(Ce(t,a))},openDialog:function(){e(function(e){e({type:"OPEN_DIALOG",payload:{ariaHide:!0}})})}}})(Ae),Ue=a(39),Me=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).componentWillMount=function(){a.props.errorMessage||a.props.clearForm()},a.onSubmit=function(){var e=Object(w.a)(N.a.mark(function e(t){var r,n,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,r=a.props.cart.products.find(function(e){return e._id===a.props.location.params._id}),n=Object(Ue.a)({},a.props.location.params),o=r||n,console.log(o,r,n),c=Object.assign(o,{quantity:a.props.form.quantity,price:a.props.location.params.price}),r){e.next=12;break}return e.next=10,a.props.addToCart(c,a.props.logedinUser._id);case 10:e.next=14;break;case 12:return e.next=14,a.props.increaseToCart(c,a.props.logedinUser._id);case 14:a.props.errorMessage?a.props.history.push({pathname:"/dialog/error",state:{DialogisOpen:!0},params:a.props.errorMessage}):(a.props.clearForm(),a.props.closeDialog()),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[1,17]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"sign_up",className:"row"},c.a.createElement("h4",{className:"col s12"},"Choose Quantity"),c.a.createElement(re,{btnSubmit:!0,name:"form",onsubmit:this.onSubmit,classcss:"col s12 card-panel",model:Q}))}}]),t}(o.Component),Le=Object(l.b)(function(e){return{form:e.form,errorMessage:e.message.errorMessage,logedinUser:e.data.logedinUser,cart:e.data.cart}},function(e){return{addToCart:function(){var t=Object(w.a)(N.a.mark(function t(a,r){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Ne(a,r));case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),increaseToCart:function(){var t=Object(w.a)(N.a.mark(function t(a,r){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(we(a,r));case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),clearForm:function(){e({type:S})}}})(Me),Fe=function(e){return function(t){var a=t.show,r=t.children,n=t.typeMessage,o=t.history;return r||o.goBack(),c.a.createElement(e,null,a&&c.a.createElement("div",null,c.a.createElement("div",{className:"alert-message"},c.a.createElement("h3",null,"error"===n?"Oops! Something went wrong!":"Hi, Message for you")),c.a.createElement("div",null,r)))}};var qe=Object(l.b)(function(e){return{logedinUser:e.data.logedinUser,selectedProduct:e.manage.selectedProduct}},null)(function(e){return c.a.createElement("div",{key:e.selectedProduct._id,className:"card row valign-wrapper"},c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{style:{width:"15rem"},src:"http://localhost:5000/".concat(e.selectedProduct.image),alt:e.selectedProduct.name})),c.a.createElement("div",{className:"card-content"},c.a.createElement("h5",{className:"card-title center-align"},"name: ",e.selectedProduct.name),c.a.createElement("h5",{className:"card-title center-align"},"Price: ",e.selectedProduct.price)))}),Ve=Object(l.b)(function(e){return{form:e.form,categories:e.data.categories,selectedProduct:e.manage.selectedProduct}},function(e){return{onInput:function(t){e({type:"ON_INPUT",payload:t.target})}}})(function(e){var t=e.categories,a=e.onInput,r=e.form,n=e.selectedProduct,o=e.location.pathname.split("/")[2];return console.log(o),c.a.createElement("div",null,c.a.createElement("label",null,"Category"),c.a.createElement("select",{defaultValue:"add"!==o&&n.category_id,onInput:function(e){return a(e)},required:!0,name:"category_id",id:"select"},c.a.createElement("option",{value:""},"--Please choose an category--"),t.map(function(e){return c.a.createElement("option",{key:e._id,value:e._id},e.name)})),""===r.category_id&&c.a.createElement("p",{className:"error red-text"},"category must be selected"))}),Je=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).drawImageScaled=function(e,t){var a=t.canvas,r=a.width/e.width,n=a.height/e.height,o=Math.min(r,n),c=(a.width-e.width*o)/2,s=(a.height-e.height*o)/2;t.clearRect(0,0,a.width,a.height),t.drawImage(e,0,0,e.width,e.height,c,s,e.width*o,e.height*o)},a.handleFile=function(e){var t=new FileReader,r=e.target;console.log(r.files),t.onload=function(e){var n=new Image;n.onload=function(e){var t=r.parentNode.querySelector("img"),o=document.querySelector("canvas").getContext("2d");r.parentNode.contains(t)&&r.parentNode.removeChild(t),a.drawImageScaled(n,o)},n.src=t.result},r.files[0]&&t.readAsDataURL(r.files[0]),console.log(r.files[0]),a.props.onInput("image",r.files[0])},a.componentDidMount=function(){if("edit"===a.typePath){var e=Object.assign({product_id:a.props.selectedProduct._id},a.props.selectedProduct);for(var t in delete e._id,e){var r=e[t];a.props.onInput(t,r)}var n=a.refs.canvas.getContext("2d"),o=a.refs.image;o.onload=function(){a.drawImageScaled(o,n)}}},a.generateFormDataObj=function(){var e=new FormData;return e.append("category_id",a.props.form.category_id),e.append("price",Math.round(a.props.form.price)-.01),e.append("name",a.props.form.name),e.append("image",a.props.form.image),"edit"===a.typePath&&e.append("product_id",a.props.selectedProduct._id),e},a.componentWillMount=function(){switch(a.props.errorMessage||a.props.clearForm(),a.typePath){case"add":a.title="Add",a.formModel=B,a.prepareData=Object(w.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.generateFormDataObj(),e.next=3,a.props.addProduct(a.url,t);case 3:case"end":return e.stop()}},e,this)}));break;case"edit":a.title="Edit",a.formModel=X,a.prepareData=Object(w.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},t=a.props.form.image===a.props.selectedProduct.image?a.props.form:a.generateFormDataObj(),e.next=4,a.props.editProduct(a.url,t);case 4:case"end":return e.stop()}},e,this)}))}},a.onSubmit=function(){var e=Object(w.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.prepareData();case 3:return e.next=5,a.props.history.push("/manage/details/");case 5:a.props.history.push({pathname:"/dialog/notify",state:{dialogisOpen:!0},params:a.props.notifyMessage});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.url=a.props.location.pathname.split("?")[0],a.typePath=a.props.location.pathname.split("/")[2],a.title="",a.image=c.a.createRef(),a.canvas=c.a.createRef(),console.log(a.url),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:this.title,className:"row"},c.a.createElement("h4",{className:"col s12"},"Hi ".concat(this.props.logedinUser.firstName,", in this panel you can ").concat(this.title," your products")),c.a.createElement(re,Object.assign({},this.props,{handleFile:this.handleFile,enctype:"multipart/form-data",btnSubmit:!0,title:"Please ".concat(this.title," your details below:"),onsubmit:this.onSubmit,classcss:"col s12 card-panel",model:this.formModel}),c.a.createElement("canvas",{ref:"canvas"}),this.props.selectedProduct&&c.a.createElement("img",{ref:"image",hidden:!0,src:"http://localhost:5000/".concat(this.props.selectedProduct.image),alt:this.props.selectedProduct.name+" image"}),c.a.createElement(Ve,this.props)))}}]),t}(o.Component),He=Object(l.b)(function(e){return{form:e.form,isAuthenticated:e.auth.isAuthenticated,errorMessage:e.message.errorMessage,notifyMessage:e.message.notifyMessage,logedinUser:e.data.logedinUser,selectedProduct:e.manage.selectedProduct}},function(e){return{addProduct:function(){var t=Object(w.a)(N.a.mark(function t(a,r){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(de(a,r));case 2:return t.next=4,e(ue(r));case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),editProduct:function(){var t=Object(w.a)(N.a.mark(function t(a,r){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(pe(a,r));case 2:return t.next=4,e(ue(r));case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),onInput:function(t,a){e({type:"ON_INPUT",payload:{name:t,value:a}})},clearForm:function(){e({type:S})}}})(Je),We=Object(l.b)(function(e){return{selectedProduct:e.data.selectedProduct}},function(e){return{}})(function(e){var t=e.location.pathname;return c.a.createElement("div",null,"/manage/details/"===t?c.a.createElement(b.a,{to:{pathname:"/manage/edit",params:e.selectedProduct},className:"btn-floating col s5  waves-effect waves-light light-green",type:"button"}," ",c.a.createElement("i",{className:"material-icons"},"create")):"/manage/edit"!==t&&"/manage/add"!==t&&c.a.createElement(b.a,{to:"/manage/add",className:"btn-floating col s12  waves-effect waves-light blue",type:"button"}," ",c.a.createElement("i",{className:"material-icons"},"add")))}),Ye=a(2),Ge=a.n(Ye);u.a.propTypes={path:Ge.a.oneOfType([Ge.a.array,Ge.a.string]),render:Ge.a.func};var ze=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).componentWillMount=Object(w.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.isAuthenticated){e.next=7;break}return e.next=3,a.props.InitDataUser(a.props.token);case 3:return e.next=5,a.props.InitDataStore(a.props.token);case 5:e.next=8;break;case 7:a.props.history.push("/signin");case 8:"user"===a.props.logedinUser.role&&a.props.history.push("/");case 9:case"end":return e.stop()}},e,this)})),a.pathname=e.location.pathname,a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"split_view",className:"row"},c.a.createElement("div",{id:"left_panel",className:"col s12 m6"},c.a.createElement("div",{id:"wrapper"},c.a.createElement(p.a,null,c.a.createElement(u.a,{key:"storeDetails",exact:!0,path:"/manage",render:function(e){return c.a.createElement(V,e)}}),c.a.createElement(u.a,{key:"productDetails",exact:!0,path:"/manage/details/",render:function(e){return c.a.createElement(qe,e)}}),c.a.createElement(u.a,{key:"actions",path:["/manage/add","/manage/edit"],render:function(e){return c.a.createElement(He,e)}})),c.a.createElement("div",null,c.a.createElement(We,this.props)))),c.a.createElement(ge,null),c.a.createElement("div",{id:"right_panel",className:"col s12 m6"},c.a.createElement(le,{route:"manage"}),c.a.createElement(Ee,null,c.a.createElement(p.a,null,c.a.createElement(u.a,{key:"All",path:["/manage","/manage/details"],render:function(e){return c.a.createElement(me,e)}}),this.props.categories.map(function(e){var t=e._id;return c.a.createElement(u.a,{key:t,exact:!0,path:"/manage/details/?categoryId",render:function(e){return c.a.createElement(me,e)}})})))))}}]),t}(o.Component),Be=Object(l.b)(function(e){return{categories:e.data.categories,selectedProduct:e.data.selectedProduct,isAuthenticated:e.auth.isAuthenticated,token:e.auth.token,logedinUser:e.data.logedinUser}},function(e){return{InitDataStore:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(L(a));case 2:return t.next=4,e(M(a));case 4:return t.next=6,e(F(a));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),InitDataUser:function(){var t=Object(w.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(P(a));case 2:return t.next=4,e(U(a));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(ze),Xe=(a(75),document.getElementById("dialogPlaceholder")),Ke=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).componentWillUnmount=function(){Xe.removeChild(a.el),window.removeEventListener("keyup",a.keyUpHandler),document.removeEventListener("click",a.outsideClickHandler)},a.componentDidMount=function(){a.state.dialogisOpen&&(Xe.appendChild(a.el),window.addEventListener("keyup",a.keyUpHandler),document.addEventListener("click",a.outsideClickHandler))},a.closeDialog=function(){window.removeEventListener("keyup",a.keyUpHandler),document.removeEventListener("click",a.outsideClickHandler),a.setState({dialogisOpen:!1}),a.props.history.goBack(),a.props.closeDialog()},a.keyUpHandler=function(e){27===e.keyCode&&a.closeDialog()},a.outsideClickHandler=function(e){a.inputField.contains(e.target)||a.closeDialog()},a.render=function(){var e=c.a.Children.map(a.props.children,function(e){return c.a.cloneElement(e,{props:a.props,closeDialog:a.closeDialog})}),t=a.state.dialogisOpen&&c.a.createElement("div",null,c.a.createElement("div",{id:"dialog-overlay"}),c.a.createElement("dialog",{id:"dialog",ref:function(e){return a.inputField=e}},c.a.createElement("button",{"aria-label":"Close",onClick:a.closeDialog},"\u2717"),c.a.createElement("div",{role:"document"},e)));return i.a.createPortal(t,a.el)},a.el=document.createElement("div"),a.inputField=c.a.createRef(),a.state={dialogisOpen:e.location.state.dialogisOpen},a}return Object(y.a)(t,e),t}(o.Component),$e=Object(l.b)(null,{closeDialog:function(){return function(e){e({type:"CLOSE_DIALOG",payload:{ariaHide:!1}})}}})(Ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=a(17),Ze=a(40),et=a(10),tt={isAuthenticated:!1,token:""},at={searchKey:""},rt={logedinUser:{},products:[],orders:[],categories:[],cart:{}},nt={ariaHide:!1},ot={errorMessage:"",notifyMessage:""},ct=a(22),st={},it={selectedProduct:{},addedRecently:{},editedRecently:{}},lt=Object(Qe.c)({message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WRITE_ERROR":return Object(et.a)({},e,{errorMessage:t.payload});case"WRITE_NOTIFY":return Object(et.a)({},e,{notifyMessage:t.payload});case"CLEAR_ERROR":return Object(et.a)({},e,{errorMessage:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SIGN_UP":return Object(et.a)({},e,{token:t.payload,isAuthenticated:!0});case"AUTH_SIGN_OUT":return Object(et.a)({},e,{token:t.payload,isAuthenticated:!1});case"AUTH_SIGN_IN":return Object(et.a)({},e,{token:t.payload,isAuthenticated:!0});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(et.a)({},e,{addedToCartRecently:t.payload});case"DELETE_FROM_CART":return Object(et.a)({},e,{removedFromCartRecently:t.payload});case"BILL_ACCEPTED":return Object(et.a)({},e,{orderId:t.payload});default:return e}},store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPATCH_SEARCH_KEY":return Object(et.a)({},e,{searchKey:t.payload});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_DATA_USER":return Object(et.a)({},e,{logedinUser:t.payload});case"INIT_DATA_CART_USER":return Object(et.a)({},e,{cart:t.payload});case"INIT_PRODUCTS":return Object(et.a)({},e,{products:t.payload});case"INIT_ORDERS":return Object(et.a)({},e,{orders:t.payload});case"INIT_CATEGORIES":return Object(et.a)({},e,{categories:t.payload});default:return e}},dialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DIALOG":case"CLOSE_DIALOG":return{ariaHide:t.payload.ariaHide};default:return e}},manage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_SELECED_PRODUCT":return Object(et.a)({},e,{selectedProduct:t.payload});case"ADD_PRODUCT":return Object(et.a)({},e,{addedRecently:t.payload});case"EDIT_PRODUCT":return Object(et.a)({},e,{editedRecently:t.payload});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_INPUT":return Object(et.a)({},e,Object(ct.a)({},t.payload.name,t.payload.value));case S:return{};default:return e}}}),ut=JSON.parse(localStorage.getItem("JWT_TOKEN")),dt={auth:{token:ut,isAuthenticated:!!ut},data:{products:JSON.parse(localStorage.getItem("PRODUCTS")),orders:JSON.parse(localStorage.getItem("ORDERS")),categories:JSON.parse(localStorage.getItem("CATEGORIES")),logedinUser:JSON.parse(localStorage.getItem("ACTIVE_USER")),cart:JSON.parse(localStorage.getItem("CART"))},manage:{selectedProduct:JSON.parse(localStorage.getItem("SELECTED_PRODUCT")),addedRecently:JSON.parse(localStorage.getItem("ADDED_RECENTLY")),editedRecently:JSON.parse(localStorage.getItem("EDITED_RECENTLY"))},users:{addedToCartRecently:JSON.parse(localStorage.getItem("ADDED_TO_CART_RECENTLY")),removedFromCartRecently:JSON.parse(localStorage.getItem("REMOVED_FROM_CART_RECENTLY"))}},pt=[Ze.a],mt=Object(Qe.e)(lt,dt,Object(Qe.d)(Qe.a.apply(void 0,pt),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),ht=Fe(function(e){var t=e.children;return c.a.createElement("div",null,t)});u.a.propTypes={path:Ge.a.oneOfType([Ge.a.array,Ge.a.string]),render:Ge.a.func},i.a.render(c.a.createElement(l.a,{store:mt},c.a.createElement(d.a,null,c.a.createElement(A,null,c.a.createElement(p.a,null,c.a.createElement(u.a,{exact:!0,path:"/",component:W}),c.a.createElement(u.a,{exact:!0,path:"/signup",component:ce}),c.a.createElement(u.a,{exact:!0,path:"/signin",component:ie}),c.a.createElement(u.a,{key:"dashboard",path:"/dashboard",component:Pe}),c.a.createElement(u.a,{key:"order",exact:!0,path:"/dashboard/order",component:Pe}),c.a.createElement(u.a,{key:"manage",path:"/manage",component:Be}),c.a.createElement(u.a,{key:"details",path:"/manage/details/",component:Be}),c.a.createElement(u.a,{exact:!0,path:"/dialog/quantity",render:function(e){return c.a.createElement($e,e,c.a.createElement(Le,e))}}),c.a.createElement(u.a,{exact:!0,path:["/dialog/notify","/dialog/error"],render:function(e){return c.a.createElement($e,e,c.a.createElement(ht,Object.assign({show:!0,typeMessage:"/dialog/notify"===e.location.pathname?"alert":"error"},e),e.location.params))}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,2,1]]]);
//# sourceMappingURL=main.2c885791.chunk.js.map